<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="–ü–æ—Å—ñ–≤–Ω–∏–π">
<title>–ü–æ—Å—ñ–≤–Ω–∏–π –ö–∞–ª–µ–Ω–¥–∞—Ä 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

:root {
  --bg: #FDFAF5;
  --card: #FFFFFF;
  --border: #E8DFC8;
  --text: #2A1F0E;
  --text-soft: #7A6A50;
  --green-dark: #2E7D32;
  --green-mid: #66BB6A;
  --green-light: #E8F5E9;
  --green-light2: #F1FAF1;
  --red-dark: #C62828;
  --red-light: #FFEBEE;
  --gold: #8B6914;
  --gold-light: #FFF8E7;
  --neutral: #F5F0E8;
  --today-ring: #F57C00;
  --radius: 14px;
  --shadow: 0 2px 12px rgba(0,0,0,0.08);
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Nunito', sans-serif;
  font-size: 18px;
  line-height: 1.5;
  max-width: 480px;
  margin: 0 auto;
  padding-bottom: 40px;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header {
  background: var(--green-dark);
  color: white;
  text-align: center;
  padding: 28px 20px 24px;
  border-radius: 0 0 28px 28px;
  box-shadow: 0 4px 20px rgba(46,125,50,0.3);
}

header h1 {
  font-size: 2rem;
  font-weight: 800;
  letter-spacing: -0.5px;
  line-height: 1.1;
}

header .subtitle {
  font-size: 1rem;
  opacity: 0.85;
  margin-top: 4px;
}

/* ‚îÄ‚îÄ MONTH NAV ‚îÄ‚îÄ */
.month-nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 16px 8px;
  gap: 8px;
}

.month-nav-btn {
  background: var(--card);
  border: 2px solid var(--border);
  border-radius: 50%;
  width: 52px;
  height: 52px;
  font-size: 1.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.15s;
  box-shadow: var(--shadow);
}
.month-nav-btn:active { transform: scale(0.93); background: var(--border); }

.month-name-block {
  text-align: center;
  flex: 1;
}
.month-name-block .month-big {
  font-size: 1.7rem;
  font-weight: 800;
  color: var(--green-dark);
  line-height: 1;
}
.month-name-block .month-sub {
  font-size: 0.85rem;
  color: var(--text-soft);
  margin-top: 2px;
}

/* ‚îÄ‚îÄ LEGEND ‚îÄ‚îÄ */
.legend {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  flex-wrap: wrap;
  justify-content: center;
}
.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.85rem;
  color: var(--text-soft);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 5px 12px;
}
.legend-dot {
  width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0;
}
.ld-best  { background: var(--green-dark); }
.ld-good  { background: var(--green-mid); }
.ld-avoid { background: var(--red-dark); }
.ld-neut  { background: #C8BDA8; }

/* ‚îÄ‚îÄ CALENDAR GRID ‚îÄ‚îÄ */
.cal-wrap {
  padding: 0 12px;
}

.weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  margin-bottom: 4px;
  padding: 0 2px;
}
.wd {
  text-align: center;
  font-size: 0.8rem;
  font-weight: 700;
  color: var(--text-soft);
  padding: 6px 0;
  text-transform: uppercase;
  letter-spacing: 0.03em;
}

.days-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
}

.day {
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 6px 2px 5px;
  min-height: 58px;
  cursor: pointer;
  transition: transform 0.12s, box-shadow 0.12s;
  border: 2px solid transparent;
  background: var(--neutral);
  position: relative;
  -webkit-user-select: none;
  user-select: none;
}
.day:active { transform: scale(0.92); }
.day.empty  { background: transparent; cursor: default; pointer-events: none; }

.day.best  { background: var(--green-light);  border-color: var(--green-dark); }
.day.good  { background: var(--green-light2); border-color: var(--green-mid); }
.day.avoid { background: var(--red-light);    border-color: #EF9A9A; }

.day.today { box-shadow: 0 0 0 3px var(--today-ring); }

.day-num {
  font-size: 1.25rem;
  font-weight: 800;
  line-height: 1;
  color: var(--text);
}
.day.best  .day-num { color: var(--green-dark); }
.day.good  .day-num { color: #388E3C; }
.day.avoid .day-num { color: var(--red-dark); }

.day-icons {
  display: flex;
  gap: 1px;
  margin-top: 3px;
  font-size: 0.72rem;
  line-height: 1;
}

.day-status {
  font-size: 0.6rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  margin-top: 2px;
  line-height: 1;
}
.day.best  .day-status { color: var(--green-dark); }
.day.good  .day-status { color: #388E3C); }
.day.avoid .day-status { color: var(--red-dark); }

/* ‚îÄ‚îÄ DAY DETAIL PANEL ‚îÄ‚îÄ */
.detail-panel {
  margin: 14px 12px 0;
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  border: 2px solid var(--border);
  overflow: hidden;
  display: none;
}
.detail-panel.visible { display: block; }

.detail-header {
  padding: 16px 20px 12px;
  border-bottom: 1px solid var(--border);
}
.detail-date {
  font-size: 1.4rem;
  font-weight: 800;
  color: var(--text);
}
.detail-status {
  display: inline-block;
  margin-top: 6px;
  padding: 5px 14px;
  border-radius: 20px;
  font-size: 1rem;
  font-weight: 700;
}
.ds-best  { background: var(--green-light);  color: var(--green-dark); }
.ds-good  { background: var(--green-light2); color: #388E3C; }
.ds-avoid { background: var(--red-light);    color: var(--red-dark); }
.ds-neut  { background: var(--neutral);      color: var(--text-soft); }

.detail-body {
  padding: 14px 20px 18px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.detail-row {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 10px 14px;
  background: var(--bg);
  border-radius: 10px;
}
.detail-row-icon {
  font-size: 1.6rem;
  flex-shrink: 0;
  line-height: 1;
  margin-top: 2px;
}
.detail-row-content {}
.detail-row-title {
  font-size: 1rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 2px;
}
.detail-row-text {
  font-size: 0.92rem;
  color: var(--text-soft);
  line-height: 1.45;
}

/* ‚îÄ‚îÄ CROPS SECTION ‚îÄ‚îÄ */
.crops-section {
  margin: 18px 12px 0;
}
.crops-title {
  font-size: 1.3rem;
  font-weight: 800;
  color: var(--green-dark);
  padding: 0 4px 10px;
}
.crops-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.crop-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 16px 18px;
  display: flex;
  gap: 14px;
  align-items: flex-start;
  box-shadow: var(--shadow);
}
.crop-emoji {
  font-size: 2.2rem;
  flex-shrink: 0;
  line-height: 1;
}
.crop-info {}
.crop-name {
  font-size: 1.1rem;
  font-weight: 800;
  color: var(--text);
  margin-bottom: 2px;
}
.crop-period {
  font-size: 0.88rem;
  color: var(--gold);
  font-weight: 600;
  margin-bottom: 4px;
}
.crop-tip {
  font-size: 0.9rem;
  color: var(--text-soft);
  line-height: 1.4;
}

/* ‚îÄ‚îÄ CLOSE BUTTON ‚îÄ‚îÄ */
.close-btn {
  display: block;
  width: calc(100% - 40px);
  margin: 10px 20px 0;
  padding: 14px;
  background: var(--neutral);
  border: 2px solid var(--border);
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 700;
  color: var(--text-soft);
  cursor: pointer;
  text-align: center;
}
.close-btn:active { background: var(--border); }

/* ‚îÄ‚îÄ ZODIAC FILTER INFO ‚îÄ‚îÄ */
.zod-info {
  margin: 0 12px;
  padding: 12px 16px;
  border-radius: 12px;
  font-size: 0.92rem;
  display: flex;
  gap: 10px;
  align-items: center;
}
.zod-fire  { background: #FFF3E0; color: #E65100; border: 1px solid #FFCC80; }
.zod-earth { background: #F9FBE7; color: #558B2F; border: 1px solid #DCE775; }
.zod-air   { background: #E3F2FD; color: #1565C0; border: 1px solid #90CAF9; }
.zod-water { background: #E0F7FA; color: #006064; border: 1px solid #80DEEA; }

</style>
</head>
<body>

<header>
  <h1>üå± –ü–æ—Å—ñ–≤–Ω–∏–π –ö–∞–ª–µ–Ω–¥–∞—Ä</h1>
  <div class="subtitle">2026 —Ä—ñ–∫ ¬∑ –ó–∞ —Ñ–∞–∑–∞–º–∏ –º—ñ—Å—è—Ü—è —Ç–∞ –∑–æ–¥—ñ–∞–∫–æ–º</div>
</header>

<div class="month-nav">
  <button class="month-nav-btn" id="prevBtn" onclick="changeMonth(-1)">‚Äπ</button>
  <div class="month-name-block">
    <div class="month-big" id="monthName">–õ—é—Ç–∏–π</div>
    <div class="month-sub" id="monthSub"></div>
  </div>
  <button class="month-nav-btn" id="nextBtn" onclick="changeMonth(1)">‚Ä∫</button>
</div>

<div class="legend">
  <div class="legend-item"><div class="legend-dot ld-best"></div>–ß—É–¥–æ–≤–æ</div>
  <div class="legend-item"><div class="legend-dot ld-good"></div>–î–æ–±—Ä–µ</div>
  <div class="legend-item"><div class="legend-dot ld-avoid"></div>–ù–µ —Å–∞–¥–∏—Ç–∏</div>
  <div class="legend-item"><div class="legend-dot ld-neut"></div>–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ</div>
</div>

<div class="cal-wrap">
  <div class="weekdays">
    <div class="wd">–ü–Ω</div><div class="wd">–í—Ç</div><div class="wd">–°—Ä</div>
    <div class="wd">–ß—Ç</div><div class="wd">–ü—Ç</div>
    <div class="wd" style="color:#C0392B">–°–±</div>
    <div class="wd" style="color:#C0392B">–ù–¥</div>
  </div>
  <div class="days-grid" id="daysGrid"></div>
</div>

<div class="detail-panel" id="detailPanel">
  <div class="detail-header">
    <div class="detail-date" id="detailDate"></div>
    <div class="detail-status" id="detailStatus"></div>
  </div>
  <div class="detail-body" id="detailBody"></div>
  <button class="close-btn" onclick="closeDetail()">‚úï –ó–∞–∫—Ä–∏—Ç–∏</button>
  <div style="height:16px"></div>
</div>

<div class="crops-section" id="cropsSection">
  <div class="crops-title" id="cropsTitle"></div>
  <div class="crops-list" id="cropsList"></div>
</div>

<script>
// ‚îÄ‚îÄ MOON AGE ‚îÄ‚îÄ
function getMoonAge(date) {
  const KNOWN_NEW_MOON = new Date(Date.UTC(2000, 0, 6, 18, 14, 0));
  const SYNODIC = 29.530588853;
  const msPerDay = 86400000;
  const days = (date - KNOWN_NEW_MOON) / msPerDay;
  return ((days % SYNODIC) + SYNODIC) % SYNODIC;
}

function getMoonEmoji(date) {
  const age = getMoonAge(date);
  const idx = Math.floor(age / (29.530588853 / 8)) % 8;
  return ['üåë','üåí','üåì','üåî','üåï','üåñ','üåó','üåò'][idx];
}

// ‚îÄ‚îÄ ZODIAC ‚îÄ‚îÄ
function getMoonZodiacIndex(date) {
  const EPOCH = new Date(Date.UTC(2000, 0, 1, 0, 0, 0));
  const SPEED = 360 / 27.321661;
  const days = (date - EPOCH) / 86400000;
  const lon = ((218.316 + SPEED * days) % 360 + 360) % 360;
  return Math.floor(lon / 30);
}

const ZODIAC = [
  { name:'–û–≤–µ–Ω',      emoji:'‚ôà', element:'fire',  q:2, good:'–ø–ª–æ–¥–æ–≤—ñ, –ª–∏—Å—Ç–æ–≤—ñ',    bad:'–∫–æ—Ä–µ–Ω–µ–ø–ª–æ–¥–∏' },
  { name:'–¢–µ–ª–µ—Ü—å',    emoji:'‚ôâ', element:'earth', q:2, good:'–∫–æ—Ä–µ–Ω–µ–ø–ª–æ–¥–∏, —Ü–∏–±—É–ª—è', bad:'–ª–∏—Å—Ç–æ–≤—ñ' },
  { name:'–ë–ª–∏–∑–Ω—è—Ç–∞',  emoji:'‚ôä', element:'air',   q:0, good:'–∫–≤—ñ—Ç–∏, —Ç—Ä–∞–≤–∏',        bad:'–±—ñ–ª—å—à—ñ—Å—Ç—å –∫—É–ª—å—Ç—É—Ä' },
  { name:'–†–∞–∫',       emoji:'‚ôã', element:'water', q:2, good:'–ª–∏—Å—Ç–æ–≤—ñ, —Å–∞–ª–∞—Ç–∏',     bad:'–∫–æ—Ä–µ–Ω–µ–ø–ª–æ–¥–∏' },
  { name:'–õ–µ–≤',       emoji:'‚ôå', element:'fire',  q:1, good:'–ø–ª–æ–¥–æ–≤—ñ, –∑–µ—Ä–Ω–æ–≤—ñ',    bad:'–ø–æ–ª–∏–≤ (—Å—É—Ö–æ)' },
  { name:'–î—ñ–≤–∞',      emoji:'‚ôç', element:'earth', q:1, good:'–∫–æ—Ä–µ–Ω–µ–ø–ª–æ–¥–∏',         bad:'–ª–∏—Å—Ç–æ–≤—ñ' },
  { name:'–¢–µ—Ä–µ–∑–∏',    emoji:'‚ôé', element:'air',   q:1, good:'–∫–≤—ñ—Ç–∏',              bad:'–æ–≤–æ—á—ñ' },
  { name:'–°–∫–æ—Ä–ø—ñ–æ–Ω', emoji:'‚ôè', element:'water', q:2, good:'–≤—Å—ñ –∫—É–ª—å—Ç—É—Ä–∏',        bad:'–Ω—ñ—á–æ–≥–æ' },
  { name:'–°—Ç—Ä—ñ–ª–µ—Ü—å',  emoji:'‚ôê', element:'fire',  q:0, good:'–∑–±—ñ—Ä –Ω–∞—Å—ñ–Ω–Ω—è',        bad:'–ø–æ—Å—ñ–≤' },
  { name:'–ö–æ–∑–µ—Ä—ñ–≥',   emoji:'‚ôë', element:'earth', q:2, good:'–∫–æ—Ä–µ–Ω–µ–ø–ª–æ–¥–∏, –æ–±—Ä—ñ–∑–∫–∞',bad:'–ª–∏—Å—Ç–æ–≤—ñ' },
  { name:'–í–æ–¥–æ–ª—ñ–π',   emoji:'‚ôí', element:'air',   q:0, good:'–≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫ —Å–∞–¥—É',     bad:'–º–∞–π–∂–µ –≤—Å–µ' },
  { name:'–†–∏–±–∏',      emoji:'‚ôì', element:'water', q:2, good:'–ª–∏—Å—Ç–æ–≤—ñ, –∫–≤—ñ—Ç–∏',      bad:'–∫–æ—Ä–µ–Ω–µ–ø–ª–æ–¥–∏ (–≥–Ω–∏–ª—å)' },
];

const ELEM_LABEL = { fire:'üî• –í–æ–≥–æ–Ω—å', earth:'üåø –ó–µ–º–ª—è', air:'üí® –ü–æ–≤—ñ—Ç—Ä—è', water:'üíß –í–æ–¥–∞' };
const ELEM_CLASS = { fire:'zod-fire', earth:'zod-earth', air:'zod-air', water:'zod-water' };

// ‚îÄ‚îÄ DAY TYPE ‚îÄ‚îÄ
function getMoonDayType(date) {
  const age = getMoonAge(date);
  if (age < 1.0)  return 3;
  if (age < 3.5)  return 2;
  if (age < 7.0)  return 1;
  if (age < 7.5)  return 3;
  if (age < 12.0) return 1;
  if (age < 14.0) return 2;
  if (age < 15.5) return 3;
  if (age < 20.0) return 0;
  if (age < 22.5) return 1;
  if (age < 23.0) return 3;
  if (age < 28.0) return 0;
  return 3;
}

function getDayType(date) {
  const moonType = getMoonDayType(date);
  if (moonType === 3) return 3;
  const z = ZODIAC[getMoonZodiacIndex(date)];
  const combined = (moonType + z.q) / 2;
  if (combined >= 1.75) return 2;
  if (combined >= 0.75) return 1;
  return 0;
}

// ‚îÄ‚îÄ MONTHS DATA ‚îÄ‚îÄ
const MONTHS = [
  { name:'–°—ñ—á–µ–Ω—å',    sub:'–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è ¬∑ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞—Å—ñ–Ω–Ω—è', crops:[
    {e:'ü´ë', n:'–ü–µ—Ä–µ—Ü—å',       p:'15‚Äì31 —Å—ñ—á–Ω—è',  t:'–°—ñ—è—Ç–∏ —Ä–æ–∑—Å–∞–¥—É –≤–¥–æ–º–∞. –¢—Ä–∏–º–∞—Ç–∏ –ø—Ä–∏ 24‚Äì26¬∞C. –ü–æ—Ç—Ä—ñ–±–Ω–∞ –ø—ñ–¥—Å–≤—ñ—Ç–∫–∞.'},
    {e:'üçÖ', n:'–†–∞–Ω–Ω—ñ —Ç–æ–º–∞—Ç–∏', p:'20‚Äì31 —Å—ñ—á–Ω—è',  t:'–¢—ñ–ª—å–∫–∏ —è–∫—â–æ —î –¥–æ—Å–≤—ñ–¥ —Ç–∞ —Ö–æ—Ä–æ—à–∞ –ø—ñ–¥—Å–≤—ñ—Ç–∫–∞. –ù–µ –ø–æ—Å–ø—ñ—à–∞–π—Ç–µ.'},
    {e:'üåø', n:'–°–µ–ª–µ—Ä–∞',       p:'10‚Äì25 —Å—ñ—á–Ω—è',  t:'–î—É–∂–µ –¥—Ä—ñ–±–Ω–µ –Ω–∞—Å—ñ–Ω–Ω—è, –Ω–µ –ø—Ä–∏—Å–∏–ø–∞—Ç–∏ –∑–µ–º–ª–µ—é. 60‚Äì90 –¥–Ω—ñ–≤ –¥–æ –≤–∏—Å–∞–¥–∫–∏.'},
    {e:'üìã', n:'–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è',   p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',  t:'–ó–∞–º–æ–≤–ª—è–π—Ç–µ –Ω–∞—Å—ñ–Ω–Ω—è, —á–∏—Ç–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥–∏, –ø–ª–∞–Ω—É–π—Ç–µ –≥—Ä—è–¥–∫–∏.'},
  ]},
  { name:'–õ—é—Ç–∏–π',    sub:'–ü–µ—Ä—à–∞ —Ä–æ–∑—Å–∞–¥–∞ ¬∑ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞', crops:[
    {e:'ü´ë', n:'–ü–µ—Ä–µ—Ü—å',        p:'1‚Äì15 –ª—é—Ç–æ–≥–æ',  t:'–ü—ñ–¥—Å–≤—ñ—Ç–∫–∞ –æ–±–æ–≤\'—è–∑–∫–æ–≤–∞ ‚Äî 16 –≥–æ–¥–∏–Ω –Ω–∞ –¥–µ–Ω—å. –¢–µ–ø–ª–æ –Ω–µ –Ω–∏–∂—á–µ +22¬∞C.'},
    {e:'üçÜ', n:'–ë–∞–∫–ª–∞–∂–∞–Ω',      p:'5‚Äì20 –ª—é—Ç–æ–≥–æ',  t:'–°—ñ—è—Ç–∏ —Ä–∞–Ω—ñ—à–µ –∑–∞ —Ç–æ–º–∞—Ç–∏ ‚Äî —Ä–æ—Å—Ç–µ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ.'},
    {e:'ü•¨', n:'–ö–∞–ø—É—Å—Ç–∞ —Ä–∞–Ω–Ω—è', p:'10‚Äì28 –ª—é—Ç–æ–≥–æ', t:'60‚Äì70 –¥–Ω—ñ–≤ –¥–æ –≤–∏—Å–∞–¥–∫–∏ —É –≤—ñ–¥–∫—Ä–∏—Ç–∏–π “ë—Ä—É–Ω—Ç.'},
    {e:'üåø', n:'–ë–∞–∑–∏–ª—ñ–∫',       p:'15‚Äì28 –ª—é—Ç–æ–≥–æ', t:'–¢–µ–ø–ª–æ–ª—é–±–Ω–∞ —Ä–æ—Å–ª–∏–Ω–∞, –Ω–µ –≤–∏–Ω–æ—Å–∏—Ç—å –ø—Ä–æ—Ç—è–≥—ñ–≤.'},
  ]},
  { name:'–ë–µ—Ä–µ–∑–µ–Ω—å', sub:'–ü–µ—Ä—à—ñ –ø–æ—Å—ñ–≤–∏ ¬∑ –ü—Ä–æ–±—É–¥–∂–µ–Ω–Ω—è', crops:[
    {e:'üçÖ', n:'–¢–æ–º–∞—Ç–∏',  p:'1‚Äì20 –±–µ—Ä–µ–∑–Ω—è',  t:'55‚Äì65 –¥–Ω—ñ–≤ –¥–æ –≤–∏—Å–∞–¥–∫–∏. –ù–µ –ø–æ–ª–∏–≤–∞–π—Ç–µ –Ω–∞–¥–º—ñ—Ä.'},
    {e:'ü•í', n:'–û–≥—ñ—Ä–∫–∏',  p:'20‚Äì31 –±–µ—Ä–µ–∑–Ω—è', t:'–°—ñ—è—Ç–∏ –Ω–µ —Ä–∞–Ω—ñ—à –Ω—ñ–∂ –∑–∞ 25‚Äì30 –¥–Ω—ñ–≤ –¥–æ –≤–∏—Å–∞–¥–∫–∏.'},
    {e:'üßÖ', n:'–¶–∏–±—É–ª—è',  p:'1‚Äì15 –±–µ—Ä–µ–∑–Ω—è',  t:'–ú–æ–∂–Ω–∞ —É —Ç–µ–ø–ª–∏—Ü—ñ –∞–±–æ –Ω–∞ –ø—ñ–¥–≤—ñ–∫–æ–Ω–Ω—ñ.'},
    {e:'ü•ï', n:'–ú–æ—Ä–∫–≤–∞',  p:'15‚Äì31 –±–µ—Ä–µ–∑–Ω—è', t:'–°—ñ—è—Ç–∏ –ø—ñ–¥ –ø–ª—ñ–≤–∫—É –≤ –∑–∞—Ö–∏—â–µ–Ω–∏–π “ë—Ä—É–Ω—Ç.'},
  ]},
  { name:'–ö–≤—ñ—Ç–µ–Ω—å',  sub:'–í–µ—Å–Ω—è–Ω—ñ —Ä–æ–±–æ—Ç–∏ ¬∑ –í—ñ–¥–∫—Ä–∏—Ç–∏–π “ë—Ä—É–Ω—Ç', crops:[
    {e:'ü•î', n:'–ö–∞—Ä—Ç–æ–ø–ª—è', p:'15‚Äì30 –∫–≤—ñ—Ç–Ω—è', t:'–ö–æ–ª–∏ “ë—Ä—É–Ω—Ç –ø—Ä–æ–≥—Ä—ñ–≤—Å—è –¥–æ +8¬∞C –Ω–∞ –≥–ª–∏–±–∏–Ω—ñ 10 —Å–º.'},
    {e:'ü•ó', n:'–°–∞–ª–∞—Ç',    p:'1‚Äì20 –∫–≤—ñ—Ç–Ω—è',  t:'–ü—Ä—è–º–æ —É “ë—Ä—É–Ω—Ç –∞–±–æ —Ç–µ–ø–ª–∏—Ü—é. –î—É–∂–µ –ø—Ä–æ—Å—Ç–∞ –∫—É–ª—å—Ç—É—Ä–∞.'},
    {e:'üå±', n:'–†–µ–¥–∏—Å',    p:'1‚Äì30 –∫–≤—ñ—Ç–Ω—è',  t:'–ì–æ—Ç–æ–≤–∏–π –∑–∞ 20‚Äì25 –¥–Ω—ñ–≤. –°—ñ—è—Ç–∏ –∫–æ–∂–Ω—ñ 2 —Ç–∏–∂–Ω—ñ –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –≤—Ä–æ–∂–∞—é.'},
    {e:'üßÑ', n:'–ß–∞—Å–Ω–∏–∫',   p:'5‚Äì20 –∫–≤—ñ—Ç–Ω—è',  t:'–Ø—Ä–∏–π —á–∞—Å–Ω–∏–∫ ‚Äî —Å–∞–¥–∏—Ç–∏ —É –ø–µ—Ä—à—ñ–π –ø–æ–ª–æ–≤–∏–Ω—ñ –∫–≤—ñ—Ç–Ω—è.'},
  ]},
  { name:'–¢—Ä–∞–≤–µ–Ω—å',  sub:'–ê–∫—Ç–∏–≤–Ω–∏–π —Å–µ–∑–æ–Ω ¬∑ –í–∏—Å–∞–¥–∂—É–≤–∞–Ω–Ω—è', crops:[
    {e:'üçÖ', n:'–¢–æ–º–∞—Ç–∏ (–≤–∏—Å–∞–¥–∫–∞)', p:'15‚Äì31 —Ç—Ä–∞–≤–Ω—è', t:'–í–∏—Å–∞–¥–∂—É–≤–∞—Ç–∏ –ø—ñ—Å–ª—è 15 —Ç—Ä–∞–≤–Ω—è ‚Äî –∑–∞–≥—Ä–æ–∑–∞ –∑–∞–º–æ—Ä–æ–∑–∫—ñ–≤ –º–∏–Ω—É–ª–∞.'},
    {e:'ü•í', n:'–û–≥—ñ—Ä–∫–∏ (–≤–∏—Å–∞–¥–∫–∞)', p:'15‚Äì31 —Ç—Ä–∞–≤–Ω—è', t:'“ê—Ä—É–Ω—Ç –Ω–µ —Ö–æ–ª–æ–¥–Ω—ñ—à–µ +15¬∞C. –ü–æ–ª–∏–≤–∞—Ç–∏ —Ç–µ–ø–ª–æ—é –≤–æ–¥–æ—é.'},
    {e:'üåΩ', n:'–ö—É–∫—É—Ä—É–¥–∑–∞',        p:'1‚Äì15 —Ç—Ä–∞–≤–Ω—è',  t:'–ü—Ä—è–º–∏–π –ø–æ—Å—ñ–≤ —É –≤—ñ–¥–∫—Ä–∏—Ç–∏–π “ë—Ä—É–Ω—Ç.'},
    {e:'ü´ò', n:'–ö–≤–∞—Å–æ–ª—è',          p:'15‚Äì31 —Ç—Ä–∞–≤–Ω—è', t:'–ü—ñ—Å–ª—è –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –∑–∞–º–æ—Ä–æ–∑–∫—ñ–≤, —É —Ç–µ–ø–ª–∏–π “ë—Ä—É–Ω—Ç.'},
  ]},
  { name:'–ß–µ—Ä–≤–µ–Ω—å',  sub:'–î–æ–≥–ª—è–¥ ¬∑ –ü–µ—Ä—à—ñ –ø–ª–æ–¥–∏', crops:[
    {e:'ü•í', n:'–û–≥—ñ—Ä–∫–∏ 2-–π –ø–æ—Å—ñ–≤',  p:'1‚Äì10 —á–µ—Ä–≤–Ω—è',  t:'–î–ª—è –æ—Å—ñ–Ω–Ω—å–æ–≥–æ –≤—Ä–æ–∂–∞—é.'},
    {e:'ü•¨', n:'–ö–∞–ø—É—Å—Ç–∞ –ø—ñ–∑–Ω—è',     p:'1‚Äì15 —á–µ—Ä–≤–Ω—è',  t:'–í–∏—Å–∞–¥–∫–∞ —Ä–æ–∑—Å–∞–¥–∏ —É –≤—ñ–¥–∫—Ä–∏—Ç–∏–π “ë—Ä—É–Ω—Ç.'},
    {e:'üåø', n:'–ö—Ä—ñ–ø —ñ –ø–µ—Ç—Ä—É—à–∫–∞',   p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',  t:'–°—ñ—è—Ç–∏ –∫–æ–∂–Ω—ñ 2‚Äì3 —Ç–∏–∂–Ω—ñ –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ—ó –∑–µ–ª–µ–Ω—ñ.'},
    {e:'üå∏', n:'–ö–≤—ñ—Ç–∏ –æ–¥–Ω–æ—Ä—ñ—á–Ω—ñ',   p:'1‚Äì20 —á–µ—Ä–≤–Ω—è',  t:'–ß–æ—Ä–Ω–æ–±—Ä–∏–≤—Ü—ñ, –∞–π—Å—Ç—Ä–∏, —Ñ–ª–æ–∫—Å–∏.'},
  ]},
  { name:'–õ–∏–ø–µ–Ω—å',   sub:'–ó–±—ñ—Ä –≤—Ä–æ–∂–∞—é ¬∑ –ü–æ–ª–∏–≤', crops:[
    {e:'ü•ï', n:'–ú–æ—Ä–∫–≤–∞ (–æ—Å—ñ–Ω–Ω—è)', p:'1‚Äì20 –ª–∏–ø–Ω—è',  t:'–î–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤–∑–∏–º–∫—É. –°—ñ—è—Ç–∏ –Ω–∞ –¥–æ–±—Ä–µ –∑–≤–æ–ª–æ–∂–µ–Ω–∏–π “ë—Ä—É–Ω—Ç.'},
    {e:'ü•¨', n:'–†–µ–¥—å–∫–∞ –∑–∏–º–æ–≤–∞',   p:'15‚Äì31 –ª–∏–ø–Ω—è', t:'–ß–æ—Ä–Ω–∞ —Ä–µ–¥—å–∫–∞, –¥–∞–π–∫–æ–Ω ‚Äî –¥–ª—è –æ—Å—ñ–Ω–Ω—å–æ–≥–æ –≤–∂–∏–≤–∞–Ω–Ω—è.'},
    {e:'üåø', n:'–ó–µ–ª–µ–Ω—å',          p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å', t:'–®–ø–∏–Ω–∞—Ç, –∫—Ä—ñ–ø, —Ä—É–∫–∫–æ–ª–∞ ‚Äî —Å—ñ—è—Ç–∏ –≤–≤–µ—á–µ—Ä—ñ —É —Å–ø–µ–∫—É.'},
    {e:'üßÖ', n:'–¶–∏–±—É–ª—è –æ–∑–∏–º–∞',    p:'25‚Äì31 –ª–∏–ø–Ω—è', t:'–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥—ñ–ª—è–Ω–∫–∏ –¥–ª—è –æ—Å—ñ–Ω–Ω—å–æ—ó –ø–æ—Å–∞–¥–∫–∏.'},
  ]},
  { name:'–°–µ—Ä–ø–µ–Ω—å',  sub:'–û—Å—ñ–Ω–Ω—ñ–π –ø–æ—Å—ñ–≤ ¬∑ –ó–∞–≥–æ—Ç–æ–≤–∫–∏', crops:[
    {e:'ü•¨', n:'–®–ø–∏–Ω–∞—Ç —ñ —Ä—É–∫–∫–æ–ª–∞',    p:'1‚Äì20 —Å–µ—Ä–ø–Ω—è',  t:'–û—Å—ñ–Ω–Ω—ñ–π —É—Ä–æ–∂–∞–π –∑–µ–ª–µ–Ω—ñ ‚Äî —Å–º–∞—á–Ω–∏–π —ñ –∫–æ—Ä–∏—Å–Ω–∏–π.'},
    {e:'üßÑ', n:'–ß–∞—Å–Ω–∏–∫ –æ–∑–∏–º–∏–π',       p:'20‚Äì31 —Å–µ—Ä–ø–Ω—è', t:'–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥—ñ–ª—è–Ω–∫–∏. –ü–æ—Å–∞–¥–∫–∞ ‚Äî —É –≤–µ—Ä–µ—Å–Ω—ñ.'},
    {e:'üå∑', n:'–¶–∏–±—É–ª–∏–Ω–∏ —Ç—é–ª—å–ø–∞–Ω—ñ–≤',  p:'25‚Äì31 —Å–µ—Ä–ø–Ω—è', t:'–ö—É–ø–∏—Ç–∏ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —É —Å—É—Ö–æ–º—É –º—ñ—Å—Ü—ñ –¥–æ –ø–æ—Å–∞–¥–∫–∏.'},
    {e:'üåø', n:'–°–∏–¥–µ—Ä–∞—Ç–∏',            p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',  t:'–ì—ñ—Ä—á–∏—Ü—è, —Ñ–∞—Ü–µ–ª—ñ—è ‚Äî –ø–æ–∫—Ä–∞—â—É—é—Ç—å “ë—Ä—É–Ω—Ç.'},
  ]},
  { name:'–í–µ—Ä–µ—Å–µ–Ω—å', sub:'–ü–æ—Å—ñ–≤ –æ–∑–∏–º–∏—Ö ¬∑ –ó–±—ñ—Ä', crops:[
    {e:'üßÑ', n:'–ß–∞—Å–Ω–∏–∫ –æ–∑–∏–º–∏–π',   p:'15‚Äì30 –≤–µ—Ä–µ—Å–Ω—è', t:'–°–∞–¥–∏—Ç–∏ –∑–∞ 4‚Äì6 —Ç–∏–∂–Ω—ñ–≤ –¥–æ –º–æ—Ä–æ–∑—ñ–≤. –ì–ª–∏–±–∏–Ω–∞ 5‚Äì7 —Å–º.'},
    {e:'üå∑', n:'–¶–∏–±—É–ª–∏–Ω–∏ –∫–≤—ñ—Ç–æ–∫', p:'1‚Äì20 –≤–µ—Ä–µ—Å–Ω—è',  t:'–¢—é–ª—å–ø–∞–Ω–∏, –Ω–∞—Ä—Ü–∏—Å–∏, –∫—Ä–æ–∫—É—Å–∏.'},
    {e:'üåø', n:'–°–∏–¥–µ—Ä–∞—Ç–∏',        p:'1‚Äì15 –≤–µ—Ä–µ—Å–Ω—è',  t:'–ñ–∏—Ç–æ, –æ–∑–∏–º–∞ –ø—à–µ–Ω–∏—Ü—è ‚Äî –∑–∞—Ö–∏—Å—Ç “ë—Ä—É–Ω—Ç—É –≤–∑–∏–º–∫—É.'},
    {e:'ü•¨', n:'–®–ø–∏–Ω–∞—Ç',          p:'1‚Äì10 –≤–µ—Ä–µ—Å–Ω—è',  t:'–í—Å—Ç–∏–≥–Ω–µ –∑—ñ–π—Ç–∏ –¥–æ —Ö–æ–ª–æ–¥—ñ–≤.'},
  ]},
  { name:'–ñ–æ–≤—Ç–µ–Ω—å',  sub:'–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ –∑–∏–º–∏ ¬∑ –¶–∏–±—É–ª–∏–Ω–∏', crops:[
    {e:'üßÖ', n:'–¶–∏–±—É–ª—è –ø—ñ–¥–∑–∏–º–Ω—è',  p:'1‚Äì20 –∂–æ–≤—Ç–Ω—è',  t:'–î—Ä—ñ–±–Ω–∞ —Ü–∏–±—É–ª—è-—Å—ñ–≤–æ–∫ ‚Äî –¥–ª—è —Ä–∞–Ω–Ω—å–æ–≥–æ –≤—Ä–æ–∂–∞—é –Ω–∞–≤–µ—Å–Ω—ñ.'},
    {e:'üå∑', n:'–¶–∏–±—É–ª–∏–Ω–∏ –∫–≤—ñ—Ç–æ–∫',  p:'1‚Äì15 –∂–æ–≤—Ç–Ω—è',  t:'–¢—é–ª—å–ø–∞–Ω–∏, –Ω–∞—Ä—Ü–∏—Å–∏, –≥—ñ–∞—Ü–∏–Ω—Ç–∏ ‚Äî –¥–æ –∑–∞–º–æ—Ä–æ–∑–∫—ñ–≤.'},
    {e:'ü•ï', n:'–ú–æ—Ä–∫–≤–∞ –ø—ñ–¥–∑–∏–º–Ω—è',  p:'20‚Äì31 –∂–æ–≤—Ç–Ω—è', t:'–°—É—Ö–µ –Ω–∞—Å—ñ–Ω–Ω—è —É –≤–∂–µ –ø—Ä–æ–º–µ—Ä–∑–ª–∏–π “ë—Ä—É–Ω—Ç.'},
    {e:'üå≥', n:'–î–µ—Ä–µ–≤–∞ —ñ –∫—É—â—ñ',    p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',  t:'–ì–∞—Ä–Ω–∏–π —á–∞—Å –¥–ª—è –ø–æ—Å–∞–¥–∫–∏ –ø–ª–æ–¥–æ–≤–∏—Ö —Å–∞–¥–∂–∞–Ω—Ü—ñ–≤.'},
  ]},
  { name:'–õ–∏—Å—Ç–æ–ø–∞–¥', sub:'–†–µ–≤—ñ–∑—ñ—è –∑–∞–ø–∞—Å—ñ–≤ ¬∑ –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è', crops:[
    {e:'üìã', n:'–ê–Ω–∞–ª—ñ–∑ —Å–µ–∑–æ–Ω—É',    p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',    t:'–ó–∞–ø–∏—à—ñ—Ç—å —â–æ –≤–¥–∞–ª–æ—Å—è, —â–æ –Ω—ñ ‚Äî –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–æ–∫—É.'},
    {e:'üå∞', n:'–°—Ç—Ä–∞—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è',    p:'–∑ 15 –ª–∏—Å—Ç–æ–ø–∞–¥–∞', t:'–ù–∞—Å—ñ–Ω–Ω—è –¥–µ—Ä–µ–≤ –ø–æ—Ç—Ä–µ–±—É—î —Ö–æ–ª–æ–¥–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø–µ—Ä–µ–¥ –ø–æ—Å—ñ–≤–æ–º.'},
    {e:'üåø', n:'–í–∏–≥–æ–Ω–∫–∞ —Ü–∏–±—É–ª—ñ',   p:'1‚Äì30 –ª–∏—Å—Ç–æ–ø–∞–¥–∞', t:'–ü–æ—Å–∞–¥—ñ—Ç—å —Ü–∏–±—É–ª—é —É –≥–æ—Ä—â–∏–∫ ‚Äî —Å–≤—ñ–∂–∞ –∑–µ–ª–µ–Ω—å —É –≥—Ä—É–¥–Ω—ñ.'},
    {e:'ü™¥', n:'–ö—ñ–º–Ω–∞—Ç–Ω—ñ —Ä–æ—Å–ª–∏–Ω–∏', p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',    t:'–°–∫–æ—Ä–æ—Ç–∏—Ç–∏ –ø–æ–ª–∏–≤, –¥–æ–¥–∞—Ç–∏ –ø—ñ–¥—Å–≤—ñ—Ç–∫—É.'},
  ]},
  { name:'–ì—Ä—É–¥–µ–Ω—å',  sub:'–ó–∏–º–æ–≤–∏–π —Å–ø–æ–∫—ñ–π ¬∑ –ê–Ω–∞–ª—ñ–∑', crops:[
    {e:'ü´ë', n:'–ü–µ—Ä–µ—Ü—å (—Ä–∞–Ω–Ω—ñ–π)',    p:'20‚Äì31 –≥—Ä—É–¥–Ω—è', t:'–ù–∞–π—Ä–∞–Ω–Ω—ñ—à–∏–π —Å—Ç—Ä–æ–∫ ‚Äî —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ —Ö–æ—Ä–æ—à—ñ–π –ø—ñ–¥—Å–≤—ñ—Ç—Ü—ñ.'},
    {e:'üìö', n:'–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞—Å—ñ–Ω–Ω—è', p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',  t:'–ù–∞–π–∫—Ä–∞—â–∏–π —á–∞—Å –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∫–∞—Ç–∞–ª–æ–≥–∏ —ñ –∑–∞–º–æ–≤–∏—Ç–∏ –Ω–∞—Å—ñ–Ω–Ω—è.'},
    {e:'üåø', n:'–í–∏–≥–æ–Ω–∫–∞ –∑–µ–ª–µ–Ω—ñ',     p:'–≤–µ—Å—å –º—ñ—Å—è—Ü—å',  t:'–¶–∏–±—É–ª—è —ñ –ø–µ—Ç—Ä—É—à–∫–∞ —É –≥–æ—Ä—â–∏–∫–∞—Ö –¥–∞–¥—É—Ç—å —Å–≤—ñ–∂—É –∑–µ–ª–µ–Ω—å.'},
    {e:'üéÅ', n:'–ü–æ–¥–∞—Ä—É–Ω–æ–∫ —Å–∞–¥—ñ–≤–Ω–∏–∫—É',p:'–¥–æ 25 –≥—Ä—É–¥–Ω—è', t:'–ù–∞–±—ñ—Ä –Ω–∞—Å—ñ–Ω–Ω—è ‚Äî —á—É–¥–æ–≤–∏–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫ –¥–ª—è –≥–æ—Ä–æ–¥–Ω–∏–∫–∞.'},
  ]},
];

const TYPE_STATUS = {
  0: { text:'–ù–µ–π—Ç—Ä–∞–ª—å–Ω–∏–π –¥–µ–Ω—å',  cls:'ds-neut'  },
  1: { text:'‚úÖ –î–æ–±—Ä–∏–π –¥–µ–Ω—å',     cls:'ds-good'  },
  2: { text:'üåü –ß—É–¥–æ–≤–∏–π –¥–µ–Ω—å!',   cls:'ds-best'  },
  3: { text:'‚ùå –ù–µ —Å–∞–¥–∏—Ç–∏',       cls:'ds-avoid' },
};
const TYPE_DESC = {
  0: '–ú–æ–∂–Ω–∞ –∑–∞–π–º–∞—Ç–∏—Å—è –ø–æ—Ç–æ—á–Ω–∏–º–∏ —Å–ø—Ä–∞–≤–∞–º–∏: –ø–æ–ª–∏–≤, –ø—Ä–æ–ø–æ–ª–∫–∞, —Ä–æ–∑–ø—É—à—É–≤–∞–Ω–Ω—è.',
  1: '–°–ø—Ä–∏—è—Ç–ª–∏–≤–∏–π –¥–µ–Ω—å –¥–ª—è –ø–æ—Å—ñ–≤—É —Ç–∞ –ø–µ—Ä–µ—Å–∞–¥–∫–∏ —Ä–æ—Å–ª–∏–Ω.',
  2: '–ù–∞–π–∫—Ä–∞—â–∏–π –¥–µ–Ω—å! –°–∞–¥—ñ—Ç—å, —Å—ñ–π—Ç–µ, –ø–µ—Ä–µ—Å–∞–¥–∂—É–π—Ç–µ ‚Äî –≤—Å–µ –ø—Ä–∏–π–º–µ—Ç—å—Å—è –¥–æ–±—Ä–µ.',
  3: '–ù–µ–±–∞–∂–∞–Ω–æ —Å–∞–¥–∏—Ç–∏ —ñ –ø–µ—Ä–µ—Å–∞–¥–∂—É–≤–∞—Ç–∏. –ö—Ä–∞—â–µ –ø–æ–ª–∏—Ç–∏, –ø—Ä–æ–ø–æ–ª–æ—Ç–∏ –∞–±–æ –≤—ñ–¥–ø–æ—á–∏—Ç–∏.',
};
const MOON_DESC = {
  'üåë':'–ù–æ–≤–∏–π –º—ñ—Å—è—Ü—å','üåí':'–ú–æ–ª–æ–¥–∏–π –º—ñ—Å—è—Ü—å','üåì':'–ü–µ—Ä—à–∞ —á–≤–µ—Ä—Ç—å',
  'üåî':'–ó—Ä–æ—Å—Ç–∞—é—á–∏–π','üåï':'–ü–æ–≤–Ω–∏–π –º—ñ—Å—è—Ü—å','üåñ':'–°–ø–∞–¥–∞—é—á–∏–π',
  'üåó':'–û—Å—Ç–∞–Ω–Ω—è —á–≤–µ—Ä—Ç—å','üåò':'–°—Ç–∞—Ä–∏–π –º—ñ—Å—è—Ü—å',
};
const DAY_STATUS_SHORT = { 0:'', 1:'–¥–æ–±—Ä–µ', 2:'—á—É–¥–æ–≤–æ', 3:'–Ω—ñ' };
const DAY_CLASS = { 0:'', 1:'good', 2:'best', 3:'avoid' };

const YEAR = 2026;
const TODAY = new Date();
let currentMonth = TODAY.getMonth();
let selectedDay = null;

function getDaysInMonth(y, m) { return new Date(y, m+1, 0).getDate(); }
function getFirstDay(y, m) {
  const d = new Date(y, m, 1).getDay();
  return d === 0 ? 6 : d - 1;
}

function renderCalendar() {
  const month = currentMonth;
  const data = MONTHS[month];
  document.getElementById('monthName').textContent = data.name;
  document.getElementById('monthSub').textContent  = data.sub;

  const daysInMonth = getDaysInMonth(YEAR, month);
  const firstDay    = getFirstDay(YEAR, month);
  const grid = document.getElementById('daysGrid');
  grid.innerHTML = '';

  for (let i = 0; i < firstDay; i++) {
    const e = document.createElement('div');
    e.className = 'day empty';
    grid.appendChild(e);
  }

  for (let d = 1; d <= daysInMonth; d++) {
    const date = new Date(YEAR, month, d, 12, 0, 0);
    const moon  = getMoonEmoji(date);
    const zIdx  = getMoonZodiacIndex(date);
    const zodiac = ZODIAC[zIdx];
    const type  = getDayType(date);
    const cls   = DAY_CLASS[type];
    const isToday = (TODAY.getFullYear() === YEAR && TODAY.getMonth() === month && TODAY.getDate() === d);

    const cell = document.createElement('div');
    cell.className = 'day' + (cls ? ' ' + cls : '') + (isToday ? ' today' : '');

    const statusText = DAY_STATUS_SHORT[type];
    cell.innerHTML = `
      <span class="day-num">${d}</span>
      <div class="day-icons"><span>${moon}</span><span style="color:${elemColor(zodiac.element)}">${zodiac.emoji}</span></div>
      ${statusText ? `<span class="day-status">${statusText}</span>` : ''}
    `;

    cell.addEventListener('click', () => showDetail(d, date, type, moon, zodiac));
    grid.appendChild(cell);
  }

  // render crops
  renderCrops();

  // close detail on month change
  closeDetail();
}

function elemColor(el) {
  return { fire:'#E65100', earth:'#558B2F', air:'#1565C0', water:'#006064' }[el];
}

function showDetail(day, date, type, moon, zodiac) {
  selectedDay = day;
  const month = currentMonth;
  const mName = MONTHS[month].name;
  const age   = Math.round(getMoonAge(date));

  document.getElementById('detailDate').textContent = `${day} ${mName} 2026`;
  const st = TYPE_STATUS[type];
  const statusEl = document.getElementById('detailStatus');
  statusEl.textContent = st.text;
  statusEl.className = 'detail-status ' + st.cls;

  const body = document.getElementById('detailBody');
  body.innerHTML = '';

  // Moon row
  body.appendChild(makeRow('üåô', `${MOON_DESC[moon]} ¬∑ ${age}-–π –¥–µ–Ω—å –º—ñ—Å—è—Ü—è`, TYPE_DESC[type]));

  // Zodiac row
  const elemName = ELEM_LABEL[zodiac.element];
  body.appendChild(makeRow(
    zodiac.emoji,
    `–ú—ñ—Å—è—Ü—å —É ${zodiac.name} ¬∑ ${elemName}`,
    `‚úÖ –î–æ–±—Ä–µ: ${zodiac.good}\n‚ùå –û–±–µ—Ä–µ–∂–Ω–æ: ${zodiac.bad}`
  ));

  const panel = document.getElementById('detailPanel');
  panel.classList.add('visible');
  // Scroll panel into view smoothly
  setTimeout(() => panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' }), 50);
}

function makeRow(icon, title, text) {
  const row = document.createElement('div');
  row.className = 'detail-row';
  row.innerHTML = `
    <div class="detail-row-icon">${icon}</div>
    <div class="detail-row-content">
      <div class="detail-row-title">${title}</div>
      <div class="detail-row-text">${text.replace(/\n/g,'<br>')}</div>
    </div>
  `;
  return row;
}

function closeDetail() {
  document.getElementById('detailPanel').classList.remove('visible');
  selectedDay = null;
}

function renderCrops() {
  const crops = MONTHS[currentMonth].crops;
  document.getElementById('cropsTitle').textContent = `üåæ –©–æ —Å–∞–¥–∏—Ç–∏ —É ${MONTHS[currentMonth].name.toLowerCase()}`;
  const list = document.getElementById('cropsList');
  list.innerHTML = '';
  crops.forEach(c => {
    const card = document.createElement('div');
    card.className = 'crop-card';
    card.innerHTML = `
      <div class="crop-emoji">${c.e}</div>
      <div class="crop-info">
        <div class="crop-name">${c.n}</div>
        <div class="crop-period">üìÖ ${c.p}</div>
        <div class="crop-tip">${c.t}</div>
      </div>
    `;
    list.appendChild(card);
  });
}

function changeMonth(dir) {
  currentMonth = (currentMonth + dir + 12) % 12;
  renderCalendar();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

renderCalendar();
</script>
</body>
</html>
